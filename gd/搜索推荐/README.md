# 花瓣搜索推荐能力文档

> **文档集概述**  
> 本文档集详细介绍花瓣网的搜索和推荐能力，包括架构设计、算法策略、接入指南等内容。

---

## 📚 文档目录

### 花瓣搜索推荐

1. **[花瓣搜索能力介绍](01-搜索能力介绍.md)** ⭐
   - 搜索能力框架
   - 搜索策略详解（搜索前、中、后）
   - 搜索理解（分词、同义词）
   - 召回策略（文本召回、多目标召回）
   - 排序与重排
   - 采集搜索、素材搜索、模板搜索

2. **[花瓣推荐能力介绍](02-推荐能力介绍.md)** ⭐
   - 推荐能力框架
   - 发现页推荐
   - 基于画板的灵感推荐
   - 关联推荐（为你推荐）
   - 图搜/相似采集/搜相似
   - 主题页推荐

### 稿定搜索推荐

3. **[稿定推荐能力介绍](03-稿定推荐能力介绍.md)** ⭐
   - 推荐能力框架（过滤、召回、融合、精排、重排）
   - 召回策略（热度、DAC、DSSM、i2i、实时、SEM）
   - 精排：CTR 预估模型
   - 重排：过气热点打压、付费置顶、比例混排
   - 各坑位推荐现状（Web、App、Art AI）

4. **[稿定搜索能力介绍](04-稿定搜索能力介绍.md)** ⭐
   - 搜索能力框架（搜索前、中、后）
   - 搜索理解（分词、同义词、意图识别、标签权重）
   - 召回策略（热点池、新品池、文本召回、向量召回）
   - L3 精排：多目标模型
   - L4 策略：VIP 置顶、过气热点打压
   - 多场景搜索（模板、素材、DAM、Art AI）

---

## 🎯 核心概念

### 搜索三阶段

花瓣搜索遵循经典的**三阶段架构**：

```
用户搜索词 (Query)
   ↓
1️⃣ 搜索理解与处理
   - 词法分析（分词）
   - 句法分析
   - 语义理解（同义词）
   ↓
2️⃣ 检索召回
   - 文本召回
   - 多目标召回
   - 业务池召回
   ↓
3️⃣ 排序
   - 粗排（LR）
   - 精排（多目标排序）
   - 重排（L4分、比例混排）
   ↓
搜索结果展示
```

### 推荐场景

花瓣推荐覆盖多个核心场景：

```
┌─────────────────────────────────────┐
│          发现页推荐                  │
│  个性化内容流 + 热度召回             │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│        画板灵感推荐                  │
│  基于用户画板的相关内容推荐          │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│        关联推荐                      │
│  为你推荐 + 相似素材推荐             │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│        图搜                          │
│  以图搜图 + 相似采集 + 搜相似        │
└─────────────────────────────────────┘
```

---

## 🔑 关键特性

### 搜索能力

| 特性 | 说明 | 价值 |
|------|------|------|
| **搜索热词** | 基于热度的词推荐 | 引导用户，降低决策成本 |
| **搜索联想** | 输入时的智能联想 | 减少输入成本，纠正错误 |
| **同义词理解** | 语义归一 | 提高召回准确率 |
| **多目标召回** | 个性化召回 | 提升用户满意度 |
| **扶持分重排** | 内容扶持策略 | 平衡生态，扶持优质内容 |
| **比例混排** | 动态调整素材比例 | 优化用户体验 |

### 推荐能力

| 特性 | 说明 | 价值 |
|------|------|------|
| **个性化推荐** | 基于用户行为的个性化 | 提升用户留存 |
| **热度召回** | 热门内容推荐 | 保证内容质量 |
| **图搜** | 以图搜图能力 | 提升搜索效率 |
| **关联推荐** | 相关内容推荐 | 增加内容消费 |
| **画板推荐** | 基于画板的推荐 | 精准匹配用户兴趣 |

---

## 📊 数据指标

### 搜索数据

```
搜索使用率：近 60% 的花瓣访客使用搜索
页面访问量：搜索结果页为花瓣第二大流量页面
```

### 关键指标

| 指标 | 说明 | 优化目标 |
|------|------|---------|
| **CTR** | 点击率 | 提升用户点击 |
| **UV CTR** | 去重点击率 | 提升真实用户点击 |
| **下载率** | 下载转化率 | 提升付费转化 |
| **付费率** | 付费转化率 | 提升商业价值 |
| **召回准确率** | 召回相关内容的准确度 | 提升搜索质量 |

---

## 🏗️ 技术架构

### 搜索架构

```
┌──────────────────────────────────────────────┐
│              用户输入 Query                   │
└──────────────────┬───────────────────────────┘
                   │
        ┌──────────┴──────────┐
        │   搜索理解层         │
        │  - 分词（Jieba）    │
        │  - 同义词映射        │
        │  - Query 改写       │
        └──────────┬──────────┘
                   │
        ┌──────────┴──────────┐
        │    召回层            │
        │  - 文本召回 + LR     │
        │  - 多目标召回        │
        │  - 业务池召回        │
        └──────────┬──────────┘
                   │
        ┌──────────┴──────────┐
        │    排序层            │
        │  - 粗排（LR）       │
        │  - 精排（多目标）    │
        │  - 重排（L4分）     │
        └──────────┬──────────┘
                   │
        ┌──────────┴──────────┐
        │    结果展示          │
        │  - 比例混排          │
        │  - 扶持分重排        │
        └──────────────────────┘
```

### 推荐架构

```
┌──────────────────────────────────────────────┐
│           用户画像 + 行为数据                 │
└──────────────────┬───────────────────────────┘
                   │
        ┌──────────┴──────────┐
        │    召回层            │
        │  - 热度召回          │
        │  - 协同过滤          │
        │  - 内容相似          │
        │  - 向量召回          │
        └──────────┬──────────┘
                   │
        ┌──────────┴──────────┐
        │    排序层            │
        │  - CTR 预估         │
        │  - 多目标排序        │
        └──────────┬──────────┘
                   │
        ┌──────────┴──────────┐
        │    策略层            │
        │  - 打散策略          │
        │  - 新鲜度策略        │
        │  - 多样性策略        │
        └──────────┬──────────┘
                   │
        ┌──────────┴──────────┐
        │    结果展示          │
        └──────────────────────┘
```

---

## 🚀 快速开始

### 搜索接入

1. **了解搜索能力**
   - 阅读 [花瓣搜索能力介绍](01-搜索能力介绍.md)
   - 理解搜索三阶段架构

2. **接入搜索 API**
   - 参考稿定搜索接入文档
   - 配置搜索参数

3. **优化搜索效果**
   - 调整召回策略
   - 优化排序权重
   - AB 测试验证

### 推荐接入

1. **了解推荐能力**
   - 阅读 [花瓣推荐能力介绍](02-推荐能力介绍.md)
   - 理解推荐场景

2. **接入推荐 API**
   - 选择合适的推荐场景
   - 配置推荐参数

3. **优化推荐效果**
   - 监控推荐指标
   - 调整推荐策略
   - A/B 测试验证

---

## 📖 学习路径

### 路径 1：搜索工程师

```
1. 搜索基础概念
   → 了解搜索三阶段

2. 搜索理解
   → 分词、同义词

3. 召回策略
   → 文本召回、多目标召回

4. 排序优化
   → 粗排、精排、重排

5. 策略调优
   → AB 测试、数据分析
```

### 路径 2：推荐工程师

```
1. 推荐基础概念
   → 了解推荐场景

2. 召回策略
   → 热度召回、协同过滤

3. 排序优化
   → CTR 预估、多目标排序

4. 策略调优
   → 打散、新鲜度、多样性
```

### 路径 3：产品经理

```
1. 业务理解
   → 搜索和推荐的业务价值

2. 功能规划
   → 搜索热词、联想词、推荐场景

3. 数据分析
   → CTR、UV CTR、转化率

4. 效果优化
   → AB 测试、用户反馈
```

---

## 🔗 相关资源

**内部文档**：
- [L3: 个性化排序](https://doc.huanleguang.com/wiki/pages/viewpage.action?pageId=248343892)
- [02 搜索能力_介绍与接入](https://doc.huanleguang.com)

**原始 Confluence 文档**：
- [花瓣搜索能力介绍](https://doc.huanleguang.com/pages/viewpage.action?pageId=286485554)
- [花瓣推荐能力介绍](https://doc.huanleguang.com/pages/viewpage.action?pageId=288235203)
- [稿定推荐能力介绍](https://doc.huanleguang.com/pages/viewpage.action?pageId=172116940)
- [稿定搜索能力介绍](https://doc.huanleguang.com/pages/viewpage.action?pageId=172116922)

---

## 📝 版本历史

| 版本 | 日期 | 修订内容 | 修订人 |
|------|------|---------|--------|
| 1.0 | 2023-03-08 | 花瓣搜索能力介绍初版 | @未知用户 (haikui) |
| 2.0 | 2025-01-25 | 文档整理和美化 | 文档整理团队 |

---

**文档维护**：搜索推荐团队  
**文档整理**：前端基建团队  
**整理日期**：2025-01-25  
**文档版本**：v2.0
