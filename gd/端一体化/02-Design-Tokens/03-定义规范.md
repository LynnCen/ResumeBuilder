# Tokens 定义规范 & 版本

## 一、文档说明

本文档定义了稿定 Design Tokens 的命名规范、分类体系、版本管理策略。这是设计师和研发共同遵循的标准，确保 Tokens 的一致性和可维护性。

---

## 二、Tokens 定义规范

### 2.1 命名规范

**基本原则：**
- 使用小写字母和连字符（kebab-case）
- 名称应具有语义化，清晰表达用途
- 遵循从通用到具体的层级结构

**命名结构：**
```
[分类]-[子分类]-[变体]-[状态]
```

**示例：**
- `color-brand-primary`：品牌主色
- `spacing-medium`：中等间距
- `font-size-heading-large`：大标题字体大小
- `shadow-card-hover`：卡片悬停时的阴影

### 2.2 分类体系

#### 2.2.1 Global Tokens（全局令牌）

**定义：**
最底层的 Token 值，属于基础的变量，是一系列阶梯式的值。基本不怎么变化，影响全局。

**特点：**
- 提供基础的设计原子
- 值通常是具体的数值或颜色
- 不直接在业务中使用，而是被 Alias Tokens 引用

**分类：**

| 类别 | 说明 | 示例 |
|------|------|------|
| **颜色阶梯** | 提供从浅到深的颜色系列 | `color-blue-50` ~ `color-blue-900` |
| **尺寸阶梯** | 提供从小到大的尺寸系列 | `size-25` ~ `size-1000` |
| **间距阶梯** | 提供从小到大的间距系列 | `space-25` ~ `space-800` |
| **字体大小阶梯** | 提供从小到大的字体大小 | `font-size-50` ~ `font-size-1000` |
| **圆角阶梯** | 提供不同程度的圆角 | `radius-small` ~ `radius-large` |
| **阴影阶梯** | 提供不同强度的阴影 | `shadow-small` ~ `shadow-large` |

**应用场景：**
- **主题切换**：通过控制颜色阶梯反转来实现深色/浅色主题
- **响应式设计**：通过控制 size 阶梯来实现移动端放大，响应式缩放
- **紧凑模式**：通过控制 space 阶梯来实现紧凑模式等

#### 2.2.2 Alias Tokens（别名令牌）

**定义：**
应用 Token，描述更具体的场景的别名 Token，命名上是一系列语义化的 Token，引用的是 Global 值。

**特点：**
- 提供语义化的命名
- 引用 Global Tokens
- 更贴近实际使用场景

**分类：**

| 类别 | 说明 | 示例 |
|------|------|------|
| **品牌色** | 品牌相关的颜色 | `color-brand-primary`<br>`color-brand-secondary` |
| **功能色** | 功能性颜色 | `color-success`<br>`color-warning`<br>`color-error`<br>`color-info` |
| **文本色** | 文本相关颜色 | `color-text-primary`<br>`color-text-secondary`<br>`color-text-disabled` |
| **背景色** | 背景相关颜色 | `color-bg-primary`<br>`color-bg-secondary`<br>`color-bg-container` |
| **边框色** | 边框相关颜色 | `color-border-primary`<br>`color-border-secondary` |
| **间距** | 常用间距 | `spacing-small`<br>`spacing-medium`<br>`spacing-large` |
| **字体** | 字体相关 | `font-family-primary`<br>`font-weight-regular`<br>`font-weight-medium` |

**应用场景：**
- 深入到细节的设计场景
- 通过对常见的模块、交互的命名来抽象具体的设计原子
- 在业务代码中直接使用

#### 2.2.3 Component Tokens（组件令牌）

**定义：**
组件级别的 Token，针对特定组件场景的 Token。

**特点：**
- 针对具体组件
- 引用 Alias Tokens 或 Global Tokens
- 提供组件的细节抽象

**分类：**

| 组件 | Token 示例 |
|------|-----------|
| **Button** | `button-bg-primary`<br>`button-text-primary`<br>`button-border-primary`<br>`button-shadow-hover` |
| **Input** | `input-bg`<br>`input-border`<br>`input-text`<br>`input-placeholder` |
| **Card** | `card-bg`<br>`card-border`<br>`card-shadow`<br>`card-radius` |
| **Modal** | `modal-bg`<br>`modal-mask-bg`<br>`modal-shadow`<br>`modal-radius` |

**应用场景：**
- 组件库开发
- 组件的主题定制

### 2.3 Tokens 层级关系

```
Global Tokens (基础原子)
    ↓ 引用
Alias Tokens (语义化)
    ↓ 引用
Component Tokens (组件化)
    ↓ 使用
业务代码
```

**设计原则：**
- 下层引用上层，形成清晰的层级结构
- 每一层都有明确的职责
- 便于维护和扩展

---

## 三、值的定义规范

### 3.1 颜色

**格式：**
- 优先使用 HEX 格式：`#FFFFFF`
- 需要透明度时使用 RGBA 格式：`rgba(255, 255, 255, 0.8)`

**命名规范：**
- Global：`color-[颜色名]-[阶梯数]`
  - 示例：`color-blue-500`
- Alias：`color-[语义]-[变体]`
  - 示例：`color-brand-primary`、`color-text-primary`

**阶梯定义：**
- 使用 50、100、200...900 的阶梯
- 50 为最浅，900 为最深
- 500 通常为标准色

### 3.2 间距

**单位：**
- 使用数字，默认单位为 px
- 转换时根据平台需求转换为 rem、rpx 等

**命名规范：**
- Global：`space-[数值]`
  - 示例：`space-8`、`space-16`
- Alias：`spacing-[语义]`
  - 示例：`spacing-small`、`spacing-medium`

**阶梯定义：**
- 基础单位：4px
- 阶梯：4、8、12、16、20、24、32、40、48、64...

### 3.3 字体大小

**单位：**
- 使用数字，默认单位为 px

**命名规范：**
- Global：`font-size-[数值]`
  - 示例：`font-size-14`
- Alias：`font-size-[语义]`
  - 示例：`font-size-body`、`font-size-heading`

**常用尺寸：**
- 12px：辅助文本
- 14px：正文
- 16px：小标题
- 20px：中标题
- 24px：大标题

### 3.4 行高

**格式：**
- 使用数字或字符串
- 数字表示倍数（如 1.5）
- 字符串表示具体值（如 "24px"）

**命名规范：**
- Global：`line-height-[变体]`
  - 示例：`line-height-tight`、`line-height-normal`
- Alias：同 Global

**常用值：**
- 1.2：紧凑
- 1.5：正常
- 1.8：宽松

### 3.5 圆角

**单位：**
- 使用数字，默认单位为 px

**命名规范：**
- Global：`radius-[大小]`
  - 示例：`radius-small`、`radius-medium`
- Alias：同 Global

**常用值：**
- 2px：小圆角
- 4px：中圆角
- 8px：大圆角
- 50%：圆形

### 3.6 阴影

**格式：**
- 使用对象或数组描述
- 包含 x、y、blur、spread、color、type

**命名规范：**
- Global：`shadow-[大小]`
  - 示例：`shadow-small`、`shadow-medium`
- Alias：`shadow-[场景]`
  - 示例：`shadow-card`、`shadow-modal`

**常用值：**
- 小阴影：`0 2px 4px rgba(0,0,0,0.1)`
- 中阴影：`0 4px 8px rgba(0,0,0,0.12)`
- 大阴影：`0 8px 16px rgba(0,0,0,0.15)`

---

## 四、版本管理

### 4.1 版本号规范

遵循语义化版本（Semantic Versioning）：`MAJOR.MINOR.PATCH`

**版本号含义：**
- **MAJOR**：重大更新，可能包含不兼容的变更
  - 示例：移除 Token、重命名 Token
- **MINOR**：功能更新，向后兼容
  - 示例：新增 Token、新增分类
- **PATCH**：修复更新，向后兼容
  - 示例：修正 Token 值、修复错误

**示例：**
- `1.0.0`：首个稳定版本
- `1.1.0`：新增一组 Tokens
- `1.1.1`：修正某个 Token 的值
- `2.0.0`：重构 Token 分类体系

### 4.2 Beta 版本

在稳定版本之前，可以发布 Beta 版本：

**格式：**`MAJOR.MINOR.PATCH-beta.N`

**示例：**
- `1.0.0-beta.1`：第一个 Beta 版本
- `1.0.0-beta.2`：第二个 Beta 版本

**使用场景：**
- 新功能测试
- 重大变更预览
- 收集反馈

### 4.3 变更日志

每次版本更新必须提供变更日志（CHANGELOG），包含：

**必需信息：**
- 版本号
- 发布日期
- 变更类型（新增、修改、删除、修复）
- 变更内容
- 影响范围

**示例：**
```markdown
## [1.1.0] - 2025-01-25

### 新增
- 新增 `color-success-light` 和 `color-success-dark`
- 新增 `spacing-xs` 和 `spacing-xl`

### 修改
- 调整 `color-brand-primary` 的值从 #1890FF 到 #1677FF

### 修复
- 修正 `shadow-card` 的模糊半径
```

### 4.4 废弃策略

当需要移除某个 Token 时：

**步骤一：标记为废弃**
- 在文档中标记为 `@deprecated`
- 提供替代方案
- 至少保留一个大版本

**步骤二：移除**
- 在下一个大版本中移除
- 在变更日志中明确说明

**示例：**
```
v1.5.0: color-primary 标记为废弃，建议使用 color-brand-primary
v2.0.0: 移除 color-primary
```

---

## 五、文档维护

### 5.1 Figma 源文件

所有 Tokens 定义的源头在 Figma 设计文件中：

**地址：**
https://www.figma.com/file/75N2O1ewVBsMW2Im6TNiff/%E7%A8%BF%E5%AE%9A---web%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6?node-id=744%3A3595

**维护要求：**
- 所有 Token 变更必须先在 Figma 中更新
- 使用 Figma Tokens 插件管理
- 保持 Figma 与代码的同步

### 5.2 代码仓库

**仓库地址：**
https://git.gaoding.com/gaoding/gdesign-ui/tree/next/packages/design-tokens

**目录结构：**
```
design-tokens/
├── tokens/          # Tokens JSON 源文件
├── dist/            # 转换后的产物
├── scripts/         # 转换脚本
├── CHANGELOG.md     # 变更日志
└── README.md        # 说明文档
```

### 5.3 更新流程

1. **设计师更新 Figma**
   - 在 Figma 中更新 Tokens
   - 导出 JSON 文件

2. **提交代码**
   - 将 JSON 文件提交到 Git
   - 更新 CHANGELOG
   - 更新版本号

3. **代码审查**
   - 团队成员审查变更
   - 确认没有问题

4. **自动构建**
   - 触发自动构建流程
   - 生成多平台产物

5. **发布**
   - 发布到 npm
   - 发布到 CDN
   - 通知相关团队

---

## 六、使用指南

### 6.1 如何选择 Token

**原则：**
- 业务代码中优先使用 Alias Tokens
- 组件开发中使用 Component Tokens
- 避免直接使用 Global Tokens

**决策树：**
```
是否是组件开发？
├── 是 → 使用 Component Tokens
└── 否 → 是否有对应的 Alias Token？
    ├── 是 → 使用 Alias Token
    └── 否 → 使用 Global Token（并考虑添加 Alias Token）
```

### 6.2 如何添加新 Token

**步骤：**
1. 在 Figma 中添加新 Token
2. 确定合适的分类（Global/Alias/Component）
3. 遵循命名规范
4. 导出并提交
5. 更新文档

**评审要点：**
- 是否符合命名规范？
- 是否有重复的 Token？
- 是否选择了合适的分类？
- 是否提供了清晰的描述？

---

## 七、总结

### 7.1 核心要点

1. **三层分类**：Global、Alias、Component，各司其职
2. **语义化命名**：清晰表达用途，便于理解和使用
3. **版本管理**：遵循语义化版本，维护变更日志
4. **源头统一**：Figma 为源头，代码为产物

### 7.2 最佳实践

- 业务代码中使用 Alias Tokens
- 保持 Token 的语义化和一致性
- 及时更新文档和变更日志
- 充分沟通，避免破坏性变更

### 7.3 下一步

1. 阅读 [接入 Design token]，了解如何在项目中使用
2. 查看 Figma 设计文件，了解具体的 Token 定义
3. 开始在项目中应用 Design Tokens

---

*文档版本：v1.0*  
*最后更新：2025-01-25*
