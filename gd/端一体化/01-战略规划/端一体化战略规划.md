# 从「套版」逐步走向端一体化初步共识

## 一、背景与挑战

### 1.1 业务诉求

接下来，套版解决方案有移动端场景下的**审批协作**的业务诉求。这个看似简单的需求，实际上引发了一个更深层次的问题：我们如何系统性地考量多端协作？

### 1.2 多端维护的困境

如果不系统性地考量，我们的协作将会变得混乱。长期来看，我们将面临：

**六个端分开维护的挑战：**
1. 桌面 Web
2. 手机 Web
3. 安卓
4. iOS
5. 桌面客户端
6. 小程序

**巨大的研发成本消耗：**
- 产品需要为每个端单独设计
- 设计师需要为每个端单独出设计稿
- 研发需要为每个端单独开发
- 测试需要为每个端单独测试

**边际成本递增：**
一旦涉及到大小屏幕的持续规模的迭代，边际成本会越来越高：
- 首先产品会分开设计
- 然后是设计师分开工作
- 最后是研发、测试都得两套班子

### 1.3 行业参考：Canva 的成功实践

Canva 采用了基于 Web 站点多端一体化的模式，并且非常成功。

**Canva 的模式特点：**
- 基于 Web 技术构建
- 多端共享代码
- 响应式设计
- 统一的用户体验

**对稿定的启示：**
我们无法确定这种模式是否对稿定的移动端业务会产生不可逆的负面影响。在缺乏深入论证的前提下，要立即做出决策很难。

### 1.4 决策困境

基于当前的惯性，我们会按照大屏幕、小屏幕进行分工：
- 这是最简单的做法
- 但长期来看成本会越来越高
- 最终会陷入多端维护的困境

所以大家会倾向于把顶层设计的问题放在未来去解决，但这并不能真正解决问题。

---

## 二、解决方案：渐进式过渡

### 2.1 核心共识

基于与稀饭的讨论，我们达成了核心共识：

**不是什么都不做，也不是激进变革，而是务实地一点点推进。**

我们得讨论如何能够过渡到端一体化的模式，能够以简单的成本务实地推进一点点，而不是：
- ❌ 什么都不做（问题会越来越严重）
- ❌ 突然来个激进的变革（风险太大）
- ✅ 渐进式过渡（可控、务实、可持续）

### 2.2 整体策略

![端一体化策略](../attachments/IMG_1770.PNG)

**两条主线：**
1. **Web 端的响应式改造**：从特定页面逐步过渡到整站
2. **团队工作方式转变**：产品、设计、开发共同参与

---

## 三、Web 端响应式改造路径

### 3.1 短期策略：从套版协作开始

**范围控制：**
- 从套版协作相关的业务模块开始
- 在现有的套版 Web 工程中做响应式页面设计
- 把影响范围圈到可控范围内

**设计原则：**
- 在手机屏幕状态下做好导航与功能精简
- 闭环掉协作的流程
- 避免导航到其他模块去

**为什么从这里开始：**
1. **业务驱动**：有明确的业务需求（审批协作）
2. **范围可控**：只涉及套版协作相关模块
3. **风险可控**：出问题影响范围小
4. **经验积累**：为后续扩展积累经验

### 3.2 中期策略：抹平端差异

**使用包抹平差异：**

通过抽象包来抹平不同端的差异，但这个事情是长期进行的。

**示例：登录认证包**
- 桌面客户端的登录方式
- 桌面 Web 端的登录方式
- 小程序的登录方式
- 移动双端的登录方式

应该通过抽象抹平这些差异，提供统一的 API。

**使用设计 Token 抹平差异：**

通过 Design Tokens 统一设计规范：
- 统一的颜色、间距、字体等
- 不同端使用相同的设计原子
- 保证多端设计一致性

详见：**[Design Tokens（设计令牌）]**

### 3.3 其他端的策略

**小程序、Wap 端：**
- 不做业务上的大改进
- 避免提前引入系统性的问题

**说明：**
上周已经和公司业务线、研发线确认，但是大家对做到什么程度理解尚未对齐。需要进一步明确边界和标准。

### 3.4 长期愿景：整站响应式

当团队具备构建跨端能力的时候：
1. 搞完几个页面后，积累了经验
2. 基于成本的收益，大家可能会持续一个页面一个页面搞下去
3. 从局部到整体的跨端也没有那么难了

**渐进式演进：**
```
套版协作模块 → 更多业务模块 → 整站响应式
```

---

## 四、团队工作方式转变

### 4.1 质量提升的类比

我们经常说：**质量提升不仅仅是 QA 的责任，而是所有人参与才能达成目标。**

同样，**端的一体化不只是工程师才考虑的问题**。

### 4.2 全员参与

**产品团队：**
- 在方案设计阶段就考虑多端适配
- 设计功能时考虑大小屏幕的差异
- 避免只针对单一端设计

**设计团队：**
- 在设计稿阶段满足响应式设计
- 使用 Design Tokens 保证一致性
- 考虑不同屏幕尺寸的布局适配

**开发团队：**
- 基于响应式设计稿实现
- 使用 Design Tokens 保证样式一致
- 编写可复用的跨端代码

### 4.3 工作流程转变

**传统流程：**
```
产品（大屏） → 设计（大屏） → 开发（大屏） → 测试（大屏）
产品（小屏） → 设计（小屏） → 开发（小屏） → 测试（小屏）
```

**新流程：**
```
产品（响应式） → 设计（响应式） → 开发（响应式） → 测试（多端）
```

**关键变化：**
- 从一开始就考虑多端
- 设计稿就是响应式的
- 开发一次，多端适配

### 4.4 能力建设

**产品能力：**
- 理解响应式设计原则
- 掌握大小屏幕的交互差异
- 学会功能精简与优先级排序

**设计能力：**
- 掌握响应式设计技能
- 使用 Design Tokens 进行设计
- 在 Figma 中进行响应式设计

**开发能力：**
- 掌握响应式开发技术
- 使用 Design Tokens 进行开发
- 编写可维护的跨端代码

---

## 五、关键成功因素

### 5.1 思维转变

**从"分开做"到"一起做"：**
- 不再是大屏幕一套、小屏幕一套
- 而是一套设计、一套代码，多端适配

**从"事后适配"到"事前考虑"：**
- 不再是做完大屏再适配小屏
- 而是从一开始就考虑多端

### 5.2 基础设施

**Design Tokens：**
- 提供统一的设计规范
- 抹平多端设计差异
- 详见：**[Design Tokens（设计令牌）]**

**公共包和组件库：**
- 抹平多端技术差异
- 提供可复用的能力
- 降低维护成本

**工具链：**
- 支持响应式开发的工具
- 自动化测试工具
- 多端预览工具

### 5.3 渐进式推进

**小步快跑：**
- 从一个模块开始
- 快速验证、快速迭代
- 积累经验、总结问题

**可控范围：**
- 把影响范围圈到可控范围内
- 避免一次性大规模改造
- 降低风险

**持续优化：**
- 根据实践经验优化方案
- 根据业务需求调整策略
- 根据技术发展演进方案

---

## 六、风险与应对

### 6.1 潜在风险

**性能风险：**
- 响应式设计可能影响性能
- 需要权衡功能与性能

**体验风险：**
- 可能无法完全适配所有场景
- 小屏幕的体验可能不如原生

**技术风险：**
- 团队可能缺乏相关经验
- 技术方案可能需要调整

**组织风险：**
- 工作方式转变可能遇到阻力
- 跨团队协作可能存在障碍

### 6.2 应对策略

**性能优化：**
- 采用懒加载
- 优化资源加载
- 针对性能瓶颈优化

**体验优化：**
- 充分的用户测试
- 根据反馈持续优化
- 必要时提供差异化体验

**技术保障：**
- 提供培训和支持
- 建立技术规范
- 积累最佳实践

**组织保障：**
- 高层支持和推动
- 明确的目标和激励
- 充分的沟通和协作

---

## 七、成功标准

### 7.1 短期目标（3-6个月）

**业务目标：**
- ✅ 完成套版协作模块的响应式改造
- ✅ 实现移动端审批协作功能

**技术目标：**
- ✅ 建立响应式开发规范
- ✅ 接入 Design Tokens
- ✅ 建立公共包和组件库

**团队目标：**
- ✅ 产品、设计、开发具备响应式工作能力
- ✅ 建立跨端协作流程

### 7.2 中期目标（6-12个月）

**业务目标：**
- ✅ 完成更多业务模块的响应式改造
- ✅ 积累多端一体化经验

**技术目标：**
- ✅ 完善 Design Tokens 体系
- ✅ 完善公共包和组件库
- ✅ 建立自动化测试体系

**团队目标：**
- ✅ 形成成熟的跨端工作模式
- ✅ 培养更多具备跨端能力的人才

### 7.3 长期目标（12个月+）

**业务目标：**
- ✅ 实现整站响应式
- ✅ 多端体验一致性显著提升

**技术目标：**
- ✅ 成熟的端一体化技术方案
- ✅ 完善的基础设施

**成本目标：**
- ✅ 新功能开发成本显著降低
- ✅ 维护成本显著降低

---

## 八、下一步行动

### 8.1 立即行动

1. **明确范围**
   - 确定套版协作模块的具体范围
   - 梳理需要响应式改造的页面

2. **组建团队**
   - 产品、设计、开发各派代表
   - 成立跨端小组

3. **制定计划**
   - 详细的实施计划
   - 明确的时间节点
   - 清晰的责任分工

### 8.2 基础建设

1. **接入 Design Tokens**
   - 阅读 [Design Tokens（设计令牌）]
   - 在项目中接入 Design Tokens
   - 详见：**[接入 Design token]**

2. **建立规范**
   - 响应式设计规范
   - 响应式开发规范
   - 代码评审标准

3. **工具准备**
   - 多端预览工具
   - 自动化测试工具
   - 性能监控工具

### 8.3 能力建设

1. **培训**
   - 响应式设计培训
   - 响应式开发培训
   - Design Tokens 使用培训

2. **实践**
   - 从小模块开始实践
   - 边做边学、边学边做
   - 总结经验、沉淀知识

3. **分享**
   - 定期分享会
   - 最佳实践汇总
   - 问题与解决方案库

---

## 九、总结

### 9.1 核心理念

**渐进式过渡：**
- 不是什么都不做
- 不是激进变革
- 而是务实地一点点推进

**全员参与：**
- 端一体化不只是工程师的事
- 产品、设计、开发共同参与
- 从设计阶段就考虑多端

**可控范围：**
- 从套版协作模块开始
- 把影响范围圈到可控范围内
- 积累经验后再扩展

### 9.2 关键成功因素

1. **思维转变**：从分开做到一起做
2. **基础设施**：Design Tokens、公共包、组件库
3. **渐进推进**：小步快跑、持续优化
4. **团队协作**：产品、设计、开发紧密配合

### 9.3 预期收益

**短期收益：**
- 满足移动端审批协作需求
- 积累跨端开发经验

**长期收益：**
- 显著降低研发成本
- 提升多端体验一致性
- 增强团队跨端能力

### 9.4 展望

当团队具备构建跨端能力的时候，搞完几个页面后，后续基于成本的收益，大家可能会持续一个页面一个页面搞下去，到时候从局部到整体的跨端也没有那么难了。

**从局部到整体，从可控到全面，从渐进到成熟。**

---

## 十、相关文档

- **[Design Tokens（设计令牌）]**：了解 Design Tokens 的概念和价值
- **[Desgin Tokens 方案介绍]**：了解完整的技术方案
- **[Tokens 定义规范 & 版本]**：了解 Tokens 的分类和命名规范
- **[接入 Design token]**：了解如何在项目中使用 Design Tokens

---

*文档版本：v1.0*  
*最后更新：2025-01-25*  
*基于与小帅、稀饭的讨论整理*
